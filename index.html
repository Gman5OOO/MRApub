<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mr. Arrington Flirt Count</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
  body {
    margin: 0;
    font-family: 'Roboto', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    color: #fff;
    text-align: center;
    padding: 20px;
  }
  h1 { font-size: 2em; font-weight: 700; margin: 20px 0; }
  #counter { font-size: 5em; font-weight: 700; margin: 20px 0; letter-spacing: 5px; }
  #description { font-size: 1.1em; margin: 10px 0 40px 0; color: #ddd; }
  button {
    padding: 10px 20px;
    font-size: 1em;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin: 5px;
  }
  #admin-controls { display: none; flex-direction: column; align-items: center; margin-top: 20px; }
  #login-btn { position: absolute; top: 10px; left: 10px; background: #fff; color: #2575fc; font-weight: bold; }
  #increment-btn { background: #4caf50; color: white; }
  #reset-btn { background: #f44336; color: white; }
  #kill-switch-btn { background: #ff9800; color: white; }
  #kill-overlay {
    display: none; /* hidden by default */
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: #000; color: #fff; z-index: 1000;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    font-size: 3em;
    user-select: none;
  }
  #kill-overlay span { cursor: pointer; margin: 0 5px; }
  input[type="text"] {
    padding: 10px; font-size: 1em; border-radius: 6px; border: none;
    margin-top: 20px; text-align: center;
  }
  @media (max-width: 600px) {
    #counter { font-size: 3em; }
    h1 { font-size: 1.5em; }
  }
</style>
</head>
<body>

<h1>Mr. Arrington Flirt Count</h1>
<div id="counter">0000</div>
<div id="description">Welcome! Admins can edit this text.</div>

<button id="login-btn">Log In</button>

<div id="admin-controls">
  <button id="increment-btn">Increment</button>
  <button id="reset-btn">Reset</button>
  <button id="kill-switch-btn">Kill Switch</button>
  <input type="text" id="description-input" placeholder="Edit description" />
  <button id="save-description-btn">Save Description</button>
</div>

<!-- Kill Switch Overlay -->
<div id="kill-overlay">
  <div>
    <span>4</span>
    <span id="kill-0">0</span>
    <span>4</span>
  </div>
  <div>
    <span id="kill-O">O</span>RROR
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  // Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyBEL3JE-abUdlGi_KwYZn7Dw5qY5f2E4SQ",
    authDomain: "flirt-counter.firebaseapp.com",
    databaseURL: "https://flirt-counter.firebaseio.com",
    projectId: "flirt-counter",
    storageBucket: "flirt-counter.firebasestorage.app",
    messagingSenderId: "891249082896",
    appId: "1:891249082896:web:472f4c70b270417d474095",
    measurementId: "G-HTX5WXVVZ3"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Elements
  const counterEl = document.getElementById('counter');
  const descriptionEl = document.getElementById('description');
  const loginBtn = document.getElementById('login-btn');
  const adminControls = document.getElementById('admin-controls');
  const incrementBtn = document.getElementById('increment-btn');
  const resetBtn = document.getElementById('reset-btn');
  const killSwitchBtn = document.getElementById('kill-switch-btn');
  const descriptionInput = document.getElementById('description-input');
  const saveDescriptionBtn = document.getElementById('save-description-btn');
  const killOverlay = document.getElementById('kill-overlay');
  const kill0 = document.getElementById('kill-0');
  const killO = document.getElementById('kill-O');

  // Load data from Firebase
  db.ref('flirtCount').get().then(snap => {
    if(snap.exists()) counterEl.textContent = snap.val().toString().padStart(4,'0');
  });
  db.ref('description').get().then(snap => {
    if(snap.exists()) descriptionEl.textContent = snap.val();
  });

  // Admin login
  loginBtn.addEventListener('click', () => {
    const pw = prompt("Enter admin password:");
    if(pw === "0115") adminControls.style.display = "flex";
    else alert("Incorrect password");
  });

  // Increment
  incrementBtn.addEventListener('click', () => {
    let count = parseInt(counterEl.textContent);
    count++;
    counterEl.textContent = count.toString().padStart(4,'0');
    db.ref('flirtCount').set(count);
  });

  // Reset
  resetBtn.addEventListener('click', () => {
    counterEl.textContent = '0000';
    db.ref('flirtCount').set(0);
  });

  // Save description
  saveDescriptionBtn.addEventListener('click', () => {
    const desc = descriptionInput.value;
    descriptionEl.textContent = desc;
    db.ref('description').set(desc);
    descriptionInput.value = '';
  });

  // Kill Switch
  let killSequence = 0;
  killSwitchBtn.addEventListener('click', () => {
    killOverlay.style.display = "flex";
    killSequence = 0; // reset
  });

  // Kill switch puzzle
  kill0.addEventListener('click', () => {
    killSequence = 1;
    alert("Step 1 complete: now click the 'O' in ERROR");
  });

  killO.addEventListener('click', () => {
    if(killSequence === 1){
      const pw = prompt("Enter admin password to disable 404:");
      if(pw === "0115"){
        killOverlay.style.display = "none";
        killSequence = 0;
        alert("Site restored!");
      } else {
        alert("Wrong password!");
        killSequence = 0;
      }
    } else {
      alert("Click the '0' in 404 first!");
    }
  });
</script>
</body>
</html>
